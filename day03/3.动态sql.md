#### 主键返回
关系属性：
- `useGeneratedKeys="true"`：让 MyBatis 直接拿 JDBC 返回的自增 id
- `keyProperty="id"`：把返回的主键写回到实体对象的 id 字段里

举例：
```xml
    <insert id="insert" useGeneratedKeys="true" keyProperty="id">
    insert into dish (name, category_id, price)
    values (#{name}, #{categoryId}, #{price})
    </insert>
```
- 插入后，在service层调用 getter方法 就能拿到自增 id


#### forEach 批量增删
- `<foreach>` 用来把集合（List/数组）展开成多段 SQL，最常见用于：
  - 批量插入：values (..),(..),(..)
  - 批量删除：where id in (..,..,..)

关键属性：
- collection：集合实体名
- item：每个元素的临时变量名
- separator：元素之间的分隔符（常用 ,）
- open/close：包裹内容用（常用于 in (...)）

举例：
```java
    void insertBatch(List<DishFlavor> flavors);
```
```xml
    <insert id="insertBatch">
    insert into dish_flavor (dish_id, name, value)
    values
    <foreach collection="flavors" item="f" separator=",">
        (#{f.dishId}, #{f.name}, #{f.value})
    </foreach>
    </insert>
```
- **注意：** 当插入/删除的字段为对象中的属性时，则需要用`item名`作为**前缀**(如`f.name`)，当字段为基础属性时，可以省略这个前缀

#### where 和 if
- where 可以根据 if 的条件，自动去掉开头多余的 and / or

举例：
```xml
    <select id="list" resultType="com.xxx.Dish">
    select *
    from dish
    <where>
        <if test="name != null and name != ''">
        and name like concat('%', #{name}, '%')
        </if>
        <if test="categoryId != null">
        and category_id = #{categoryId}
        </if>
        <if test="status != null">
        and status = #{status}
        </if>
    </where>
    order by update_time desc
    </select>
```